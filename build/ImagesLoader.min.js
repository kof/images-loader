!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.ImagesLoader=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){/*!
 * Ultra performant dependences free images loader.
 *
 * @copyright Oleg Slobodskoi 2014
 * @website https://github.com/kof/images-loader
 * @license MIT
 */
function ImagesLoader(options){this.options=options||{};this.options.pool||(this.options.pool=5);this.options.timeout!=null||(this.options.timeout=3e3);this._pool=[];this._queue=[];this._callbacks={};this.pool(this.options.pool)}ImagesLoader.emptyGif="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=";module.exports=ImagesLoader;ImagesLoader.prototype.load=function(url,callback){if(this._callbacks[url]){this._callbacks[url].push(callback)}else if(this._pool.length){this._callbacks[url]=[callback];this._load(this._pool.pop(),url)}else{this._queue.push(arguments)}return this};ImagesLoader.prototype.pool=function(length){var i;if(length==null)return this.options.pool;for(i=0;i<length;i++){this._pool.push(new Image)}return this.options.pool=length};ImagesLoader.prototype._load=function(img,url){var self=this,timeoutId;img.onerror=img.onload=function(event){var err,i,size,callbacks=self._callbacks[url];if(event.type=="error"||event.type=="timeout"){err=new Error("Could not load image: "+url);err.type=event.type;err.event=event}else{size={width:img.width,height:img.height}}for(i=0;i<callbacks.length;i++){if(callbacks[i])callbacks[i](err,size)}delete self._callbacks[url];img.onerror=img.onload=null;img.src=ImagesLoader.emptyGif;self._pool.push(img);if(timeoutId)clearTimeout(timeoutId);self._next()};img.src=url;if(this.options.timeout){timeoutId=setTimeout(function(){img.onerror({type:"timeout"})},this.options.timeout)}};ImagesLoader.prototype._next=function(){if(this._queue.length)this.load.apply(this,this._queue.shift())}},{}]},{},[1])(1)});